<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ui="clr-namespace:Lemoo.UI.Controls"
                    xmlns:conv="clr-namespace:Lemoo.UI.Converters">

    <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>

    <!-- ============================================
         DialogHost 样式
         ============================================ -->

    <Style x:Key="DialogHost.DefaultStyle" TargetType="{x:Type ui:DialogHost}">
        <Setter Property="OverlayBackground" Value="{DynamicResource NotificationBackgroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:DialogHost}">
                    <Grid>
                        <!-- 主内容 -->
                        <ContentPresenter Content="{TemplateBinding Content}"/>

                        <!-- 遮罩层和对话框容器 -->
                        <Grid x:Name="PART_DialogContainer"
                              Visibility="{TemplateBinding IsOpen, Converter={StaticResource BoolToVisibilityConverter}}"
                              Background="Transparent">
                            <!-- 遮罩背景（可点击） -->
                            <Border Background="{TemplateBinding OverlayBackground}"
                                    Opacity="{TemplateBinding OverlayOpacity}"/>

                            <!-- 对话框内容 -->
                            <ContentPresenter Content="{TemplateBinding DialogContent}"
                                            ContentTemplate="{TemplateBinding DialogContentTemplate}"
                                            HorizontalAlignment="{TemplateBinding DialogHorizontalAlignment}"
                                            VerticalAlignment="{TemplateBinding DialogVerticalAlignment}"/>
                        </Grid>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="CloseOnClickOutside" Value="True">
                            <Setter TargetName="PART_DialogContainer" Property="Background">
                                <Setter.Value>
                                    <!-- 使用透明背景，通过 PreviewMouseLeftButtonDown 事件处理 -->
                                    <SolidColorBrush Color="Transparent"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type ui:DialogHost}" BasedOn="{StaticResource DialogHost.DefaultStyle}"/>

</ResourceDictionary>
