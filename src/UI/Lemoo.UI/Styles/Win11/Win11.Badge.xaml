<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="clr-namespace:Lemoo.UI.Controls"
    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!-- Badge 默认样式 -->
    <Style TargetType="{x:Type ui:Badge}" x:Key="{x:Type ui:Badge}">
        <Setter Property="Background" Value="{DynamicResource Brush.Semantic.Error}" />
        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.OnDark}" />
        <Setter Property="FontWeight" Value="SemiBold" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="Padding" Value="6,2" />
        <Setter Property="Height" Value="20" />
        <Setter Property="MinWidth" Value="20" />
        <Setter Property="BadgeShape" Value="Pill" />
        <Setter Property="BadgePlacement" Value="TopRight" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:Badge}">
                    <Grid>
                        <Border
                            x:Name="BadgeBorder"
                            Background="{TemplateBinding Background}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Padding="{TemplateBinding Padding}"
                            Height="{TemplateBinding Height}"
                            MinWidth="{TemplateBinding MinWidth}"
                            HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalAlignment}"
                            Visibility="Collapsed">

                            <ContentPresenter
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                TextElement.Foreground="{TemplateBinding Foreground}"
                                TextElement.FontWeight="{TemplateBinding FontWeight}"
                                TextElement.FontSize="{TemplateBinding FontSize}" />
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- 点状徽章 -->
                        <Trigger Property="BadgeShape" Value="Dot">
                            <Setter TargetName="BadgeBorder" Property="Width" Value="8" />
                            <Setter TargetName="BadgeBorder" Property="Height" Value="8" />
                            <Setter TargetName="BadgeBorder" Property="MinWidth" Value="8" />
                            <Setter TargetName="BadgeBorder" Property="Padding" Value="0" />
                            <Setter TargetName="BadgeBorder" Property="CornerRadius" Value="4" />
                        </Trigger>

                        <!-- 圆形徽章 -->
                        <Trigger Property="BadgeShape" Value="Circle">
                            <Setter TargetName="BadgeBorder" Property="Width" Value="24" />
                            <Setter TargetName="BadgeBorder" Property="Height" Value="24" />
                            <Setter TargetName="BadgeBorder" Property="CornerRadius" Value="12" />
                        </Trigger>

                        <!-- 显示条件：有内容或 ShowZero 为 true -->
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Content, RelativeSource={RelativeSource Self}}" Value="{x:Null}" />
                                <Condition Binding="{Binding ShowZero, RelativeSource={RelativeSource Self}}" Value="False" />
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="BadgeBorder" Property="Visibility" Value="Collapsed" />
                        </MultiDataTrigger>

                        <!-- 零值处理 -->
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Content, RelativeSource={RelativeSource Self}, Converter={StaticResource StringFormatConverter}, ConverterParameter='{}{0}'}" Value="0" />
                                <Condition Binding="{Binding ShowZero, RelativeSource={RelativeSource Self}}" Value="False" />
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="BadgeBorder" Property="Visibility" Value="Collapsed" />
                        </MultiDataTrigger>

                        <!-- 正常显示 -->
                        <DataTrigger Binding="{Binding Content, RelativeSource={RelativeSource Self}}" Value="{x:Null}">
                            <DataTrigger.Setters>
                                <Setter TargetName="BadgeBorder" Property="Visibility" Value="Collapsed" />
                            </DataTrigger.Setters>
                        </DataTrigger>

                        <Trigger Property="Content" Value="{x:Null}">
                            <Setter TargetName="BadgeBorder" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Content, RelativeSource={RelativeSource Self}}" Value="{x:Null}" />
                                <Condition Binding="{Binding BadgeShape, RelativeSource={RelativeSource Self}}" Value="Dot" />
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="BadgeBorder" Property="Visibility" Value="Visible" />
                        </MultiDataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Badge.Primary 样式 -->
    <Style TargetType="{x:Type ui:Badge}" x:Key="Badge.Primary" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Background" Value="{DynamicResource Brush.Primary}" />
    </Style>

    <!-- Badge.Success 样式 -->
    <Style TargetType="{x:Type ui:Badge}" x:Key="Badge.Success" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Background" Value="{DynamicResource Brush.Semantic.Success}" />
    </Style>

    <!-- Badge.Warning 样式 -->
    <Style TargetType="{x:Type ui:Badge}" x:Key="Badge.Warning" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Background" Value="{DynamicResource Brush.Semantic.Warning}" />
    </Style>

    <!-- Badge.Info 样式 -->
    <Style TargetType="{x:Type ui:Badge}" x:Key="Badge.Info" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Background" Value="{DynamicResource Brush.Semantic.Info}" />
    </Style>

</ResourceDictionary>
