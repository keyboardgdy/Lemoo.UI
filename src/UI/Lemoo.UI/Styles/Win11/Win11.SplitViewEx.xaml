<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Lemoo.UI.Controls.Layout"
                    xmlns:ui="clr-namespace:Lemoo.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Lemoo.UI;component/Styles/Win11/Win11.Tokens.xaml" />
        <ResourceDictionary Source="pack://application:,,,/Lemoo.UI;component/Converters/Converters.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!-- SplitViewEx 样式 -->
    <Style x:Key="Win11.SplitViewExStyle" TargetType="controls:SplitViewEx">
        <Setter Property="Background" Value="{DynamicResource Brush.Card.Background}"/>
        <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Primary}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource Brush.Card.Border}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="SplitterBrush" Value="Transparent"/>
        <Setter Property="SplitterHoverBrush" Value="{DynamicResource Brush.Accent.Primary}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="controls:SplitViewEx">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource Win11.CornerRadius.Small}"
                            Padding="{TemplateBinding Padding}">
                        <Grid x:Name="PART_MainGrid">
                            <!-- 行和列定义将在代码中动态设置 -->

                            <!-- 第一个面板 -->
                            <ContentPresenter Grid.Row="0"
                                              Grid.Column="0"
                                              Content="{TemplateBinding Panel1Content}"/>

                            <!-- 分割器 -->
                            <Grid x:Name="PART_Splitter"
                                  Grid.Row="1"
                                  Grid.Column="1"
                                  Background="{TemplateBinding SplitterBrush}"
                                  ZIndex="10">
                                <Thumb x:Name="PART_DragThumb"
                                       Template="{StaticResource SplitterThumbTemplate}"/>
                            </Grid>

                            <!-- 第二个面板 -->
                            <ContentPresenter Grid.Row="2"
                                              Grid.Column="2"
                                              Content="{TemplateBinding Panel2Content}"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 分割器Thumb模板 -->
    <ControlTemplate x:Key="SplitterThumbTemplate" TargetType="Thumb">
        <Grid Background="Transparent">
            <!-- 可见区域 -->
            <Border x:Name="VisibleBorder"
                    Background="{Binding SplitterBrush, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"
                    Width="{Binding SplitterThickness, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"
                    Height="{Binding SplitterThickness, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"/>

            <!-- 悬停区域（更大的透明区域） -->
            <Border Background="Transparent"
                    Width="{Binding SplitterHoverThickness, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"
                    Height="{Binding SplitterHoverThickness, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"/>

            <!-- 手柄指示器 -->
            <Grid x:Name="HandleIndicator"
                  Width="20"
                  Height="20"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  Opacity="0">
                <!-- 水平分割器的手柄 -->
                <Path x:Name="HorizontalHandle"
                      Data="M 3 4 L 3 8 L 3 12 M 6 4 L 6 8 L 6 12 M 9 4 L 9 8 L 9 12"
                      Stroke="{DynamicResource Brush.Text.Secondary}"
                      StrokeThickness="1.5"
                      Visibility="Collapsed"/>

                <!-- 垂直分割器的手柄 -->
                <Path x:Name="VerticalHandle"
                      Data="M 4 3 L 8 3 L 12 3 M 4 6 L 8 6 L 12 6 M 4 9 L 8 9 L 12 9"
                      Stroke="{DynamicResource Brush.Text.Secondary}"
                      StrokeThickness="1.5"
                      Visibility="Collapsed"/>
            </Grid>

            <!-- 双箭头指示器 -->
            <Grid x:Name="DoubleArrowIndicator"
                  Width="24"
                  Height="24"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  Opacity="0">
                <!-- 水平双箭头 -->
                <Path x:Name="HorizontalArrow"
                      Data="M 2 6 L 6 10 L 2 14 M 14 6 L 18 10 L 14 14"
                      Stroke="{DynamicResource Brush.Accent.Primary}"
                      StrokeThickness="1.5"
                      StrokeLineJoin="Round"
                      Fill="Transparent"
                      Visibility="Collapsed"/>

                <!-- 垂直双箭头 -->
                <Path x:Name="VerticalArrow"
                      Data="M 6 2 L 10 6 L 14 2 M 6 14 L 10 18 L 14 14"
                      Stroke="{DynamicResource Brush.Accent.Primary}"
                      StrokeThickness="1.5"
                      StrokeLineJoin="Round"
                      Fill="Transparent"
                      Visibility="Collapsed"/>
            </Grid>
        </Grid>

        <ControlTemplate.Triggers>
            <!-- 水平方向 -->
            <DataTrigger Binding="{Binding Orientation, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}" Value="Horizontal">
                <Setter TargetName="HorizontalHandle" Property="Visibility" Value="Visible"/>
                <Setter TargetName="HorizontalArrow" Property="Visibility" Value="Visible"/>
            </DataTrigger>

            <!-- 垂直方向 -->
            <DataTrigger Binding="{Binding Orientation, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}" Value="Vertical">
                <Setter TargetName="VerticalHandle" Property="Visibility" Value="Visible"/>
                <Setter TargetName="VerticalArrow" Property="Visibility" Value="Visible"/>
            </DataTrigger>

            <!-- 线条手柄类型 -->
            <DataTrigger Binding="{Binding HandleType, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}" Value="Line">
                <Setter TargetName="HandleIndicator" Property="Visibility" Value="Collapsed"/>
            </DataTrigger>

            <!-- 手柄手柄类型 -->
            <DataTrigger Binding="{Binding HandleType, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}" Value="Handle">
                <Setter TargetName="DoubleArrowIndicator" Property="Visibility" Value="Collapsed"/>
            </DataTrigger>

            <!-- 双箭头手柄类型 -->
            <DataTrigger Binding="{Binding HandleType, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}" Value="DoubleArrow">
                <Setter TargetName="HandleIndicator" Property="Visibility" Value="Collapsed"/>
            </DataTrigger>

            <!-- 鼠标悬停 -->
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="HandleIndicator" Property="Opacity" Value="1"/>
                <Setter TargetName="DoubleArrowIndicator" Property="Opacity" Value="1"/>
                <Setter TargetName="VisibleBorder" Property="Background" Value="{Binding SplitterHoverBrush, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"/>
            </Trigger>
            <!-- 鼠标离开（恢复默认） -->
            <Trigger Property="IsMouseOver" Value="False">
                <Setter TargetName="HandleIndicator" Property="Opacity" Value="0"/>
                <Setter TargetName="DoubleArrowIndicator" Property="Opacity" Value="0"/>
                <Setter TargetName="VisibleBorder" Property="Background" Value="{Binding SplitterBrush, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"/>
            </Trigger>

            <!-- 拖拽中 -->
            <Trigger Property="IsDragging" Value="True">
                <Setter TargetName="HandleIndicator" Property="Opacity" Value="1"/>
                <Setter TargetName="DoubleArrowIndicator" Property="Opacity" Value="1"/>
                <Setter TargetName="VisibleBorder" Property="Background" Value="{Binding SplitterHoverBrush, RelativeSource={RelativeSource AncestorType=controls:SplitViewEx}}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- 默认样式 -->
    <Style TargetType="controls:SplitViewEx" BasedOn="{StaticResource Win11.SplitViewExStyle}"/>

</ResourceDictionary>
