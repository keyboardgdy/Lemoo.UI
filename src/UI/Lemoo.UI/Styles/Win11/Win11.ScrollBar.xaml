<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ============================================
         Win11 风格滚动条样式
         与主题系统集成，支持自动主题切换
         ============================================ -->

    <!-- 滚动条 brushes - 从主题资源引用 -->
    <SolidColorBrush x:Key="ScrollBar.Background" Color="{DynamicResource scrollbar.sliderBackground}" />
    <SolidColorBrush x:Key="ScrollBar.MouseOver.Background" Color="{DynamicResource scrollbar.sliderHoverBackground}" />
    <SolidColorBrush x:Key="ScrollBar.Thumb.Background" Color="{DynamicResource scrollbar.sliderBackground}" />
    <SolidColorBrush x:Key="ScrollBar.Thumb.MouseOver.Background" Color="{DynamicResource scrollbar.sliderHoverBackground}" />
    <SolidColorBrush x:Key="ScrollBar.Thumb.Pressed.Background" Color="{DynamicResource button.pressedBackground}" />
    <SolidColorBrush x:Key="ScrollBar.Disabled.Background" Color="Transparent" />

    <!-- 垂直滚动条样式 -->
    <Style x:Key="VerticalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Focusable" Value="false" />
        <Setter Property="IsTabStop" Value="false" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Rectangle Fill="Transparent" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="VerticalScrollBarThumb" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="IsTabStop" Value="false" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid>
                        <!-- 滚动条滑块 -->
                        <Border x:Name="ThumbBorder"
                                Background="{StaticResource ScrollBar.Thumb.Background}"
                                CornerRadius="4"
                                Margin="2,0,2,0"
                                Width="8"
                                HorizontalAlignment="Center"
                                Opacity="0.6">
                            <Border.Effect>
                                <DropShadowEffect Color="{DynamicResource scrollbar.shadow}"
                                                  Opacity="0.2"
                                                  BlurRadius="4"
                                                  ShadowDepth="1"
                                                  Direction="270" />
                            </Border.Effect>
                        </Border>

                        <!-- 悬停效果 -->
                        <Border x:Name="ThumbBorderHover"
                                Background="{StaticResource ScrollBar.Thumb.MouseOver.Background}"
                                CornerRadius="4"
                                Margin="2,0,2,0"
                                Width="8"
                                HorizontalAlignment="Center"
                                Opacity="0"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" />
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect Color="{DynamicResource scrollbar.shadow}"
                                                  Opacity="0.3"
                                                  BlurRadius="6"
                                                  ShadowDepth="1"
                                                  Direction="270" />
                            </Border.Effect>
                        </Border>

                        <!-- 按下效果 -->
                        <Border x:Name="ThumbBorderPressed"
                                Background="{StaticResource ScrollBar.Thumb.Pressed.Background}"
                                CornerRadius="4"
                                Margin="2,0,2,0"
                                Width="8"
                                HorizontalAlignment="Center"
                                Opacity="0"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="0.95" ScaleY="0.95" />
                            </Border.RenderTransform>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.15" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderHover"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.8"
                                                       Duration="0:0:0.15" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.6"
                                                       Duration="0:0:0.15" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderHover"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.15" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                        <Trigger Property="IsDragging" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.1" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderPressed"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.6"
                                                       Duration="0:0:0.1" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderPressed"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="VerticalScrollBar" TargetType="{x:Type ScrollBar}">
        <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false" />
        <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Width" Value="12" />
        <Setter Property="MinWidth" Value="12" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollBar}">
                    <Grid x:Name="Bg" Background="Transparent" SnapsToDevicePixels="true">
                        <Grid.RowDefinitions>
                            <RowDefinition MaxHeight="0" />
                            <RowDefinition Height="0.00001*" />
                            <RowDefinition MaxHeight="0" />
                        </Grid.RowDefinitions>

                        <!-- 上箭头按钮（隐藏） -->
                        <RepeatButton Grid.Row="0"
                                      Command="{x:Static ScrollBar.LineUpCommand}"
                                      Style="{StaticResource VerticalScrollBarPageButton}" />

                        <!-- 滑块轨道 -->
                        <Track x:Name="PART_Track"
                               Grid.Row="1"
                               IsDirectionReversed="true"
                               Focusable="false">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Command="{x:Static ScrollBar.PageUpCommand}"
                                             Style="{StaticResource VerticalScrollBarPageButton}" />
                            </Track.DecreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb Style="{StaticResource VerticalScrollBarThumb}" />
                            </Track.Thumb>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static ScrollBar.PageDownCommand}"
                                             Style="{StaticResource VerticalScrollBarPageButton}" />
                            </Track.IncreaseRepeatButton>
                        </Track>

                        <!-- 下箭头按钮（隐藏） -->
                        <RepeatButton Grid.Row="2"
                                      Command="{x:Static ScrollBar.LineDownCommand}"
                                      Style="{StaticResource VerticalScrollBarPageButton}" />
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- 悬停时显示滚动条 -->
                                        <DoubleAnimation Storyboard.TargetName="Bg"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.2" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- 离开时保持可见（可根据需求改为淡出） -->
                                        <DoubleAnimation Storyboard.TargetName="Bg"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.2" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 水平滚动条样式 -->
    <Style x:Key="HorizontalScrollBarPageButton" TargetType="{x:Type RepeatButton}">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Focusable" Value="false" />
        <Setter Property="IsTabStop" Value="false" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Rectangle Fill="Transparent" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HorizontalScrollBarThumb" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="IsTabStop" Value="false" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid>
                        <!-- 滚动条滑块 -->
                        <Border x:Name="ThumbBorder"
                                Background="{StaticResource ScrollBar.Thumb.Background}"
                                CornerRadius="4"
                                Margin="0,2,0,2"
                                Height="8"
                                VerticalAlignment="Center"
                                Opacity="0.6">
                            <Border.Effect>
                                <DropShadowEffect Color="{DynamicResource scrollbar.shadow}"
                                                  Opacity="0.2"
                                                  BlurRadius="4"
                                                  ShadowDepth="1"
                                                  Direction="270" />
                            </Border.Effect>
                        </Border>

                        <!-- 悬停效果 -->
                        <Border x:Name="ThumbBorderHover"
                                Background="{StaticResource ScrollBar.Thumb.MouseOver.Background}"
                                CornerRadius="4"
                                Margin="0,2,0,2"
                                Height="8"
                                VerticalAlignment="Center"
                                Opacity="0"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1.1" ScaleY="1.1" />
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect Color="{DynamicResource scrollbar.shadow}"
                                                  Opacity="0.3"
                                                  BlurRadius="6"
                                                  ShadowDepth="1"
                                                  Direction="270" />
                            </Border.Effect>
                        </Border>

                        <!-- 按下效果 -->
                        <Border x:Name="ThumbBorderPressed"
                                Background="{StaticResource ScrollBar.Thumb.Pressed.Background}"
                                CornerRadius="4"
                                Margin="0,2,0,2"
                                Height="8"
                                VerticalAlignment="Center"
                                Opacity="0"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="0.95" ScaleY="0.95" />
                            </Border.RenderTransform>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.15" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderHover"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.8"
                                                       Duration="0:0:0.15" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.6"
                                                       Duration="0:0:0.15" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderHover"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.15" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                        <Trigger Property="IsDragging" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.1" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderPressed"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorder"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0.6"
                                                       Duration="0:0:0.1" />
                                        <DoubleAnimation Storyboard.TargetName="ThumbBorderPressed"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="0"
                                                       Duration="0:0:0.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="HorizontalScrollBar" TargetType="{x:Type ScrollBar}">
        <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false" />
        <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Height" Value="12" />
        <Setter Property="MinHeight" Value="12" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollBar}">
                    <Grid x:Name="Bg" Background="Transparent" SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MaxWidth="0" />
                            <ColumnDefinition Width="0.00001*" />
                            <ColumnDefinition MaxWidth="0" />
                        </Grid.ColumnDefinitions>

                        <!-- 左箭头按钮（隐藏） -->
                        <RepeatButton Grid.Column="0"
                                      Command="{x:Static ScrollBar.LineLeftCommand}"
                                      Style="{StaticResource HorizontalScrollBarPageButton}" />

                        <!-- 滑块轨道 -->
                        <Track x:Name="PART_Track"
                               Grid.Column="1"
                               Focusable="false">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Command="{x:Static ScrollBar.PageLeftCommand}"
                                             Style="{StaticResource HorizontalScrollBarPageButton}" />
                            </Track.DecreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb Style="{StaticResource HorizontalScrollBarThumb}" />
                            </Track.Thumb>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static ScrollBar.PageRightCommand}"
                                             Style="{StaticResource HorizontalScrollBarPageButton}" />
                            </Track.IncreaseRepeatButton>
                        </Track>

                        <!-- 右箭头按钮（隐藏） -->
                        <RepeatButton Grid.Column="2"
                                      Command="{x:Static ScrollBar.LineRightCommand}"
                                      Style="{StaticResource HorizontalScrollBarPageButton}" />
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Bg"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.2" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Bg"
                                                       Storyboard.TargetProperty="Opacity"
                                                       To="1"
                                                       Duration="0:0:0.2" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ScrollViewer 样式 -->
    <Style x:Key="ModernScrollViewer" TargetType="{x:Type ScrollViewer}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                    <Grid Background="{TemplateBinding Background}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- 内容区域 -->
                        <ScrollContentPresenter Grid.Column="0"
                                              Grid.Row="0"
                                              CanContentScroll="{TemplateBinding CanContentScroll}" />

                        <!-- 垂直滚动条 -->
                        <ScrollBar x:Name="PART_VerticalScrollBar"
                                   Grid.Column="1"
                                   Grid.Row="0"
                                   AutomationProperties.AutomationId="VerticalScrollBar"
                                   Cursor="Arrow"
                                   Maximum="{TemplateBinding ScrollableHeight}"
                                   Minimum="0"
                                   Style="{StaticResource VerticalScrollBar}"
                                   ViewportSize="{TemplateBinding ViewportHeight}"
                                   Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                   Value="{TemplateBinding VerticalOffset}" />

                        <!-- 水平滚动条 -->
                        <ScrollBar x:Name="PART_HorizontalScrollBar"
                                   Grid.Column="0"
                                   Grid.Row="1"
                                   AutomationProperties.AutomationId="HorizontalScrollBar"
                                   Cursor="Arrow"
                                   Maximum="{TemplateBinding ScrollableWidth}"
                                   Minimum="0"
                                   Orientation="Horizontal"
                                   Style="{StaticResource HorizontalScrollBar}"
                                   ViewportSize="{TemplateBinding ViewportWidth}"
                                   Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                   Value="{TemplateBinding HorizontalOffset}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 全局 ScrollViewer 默认样式 -->
    <Style TargetType="{x:Type ScrollViewer}" BasedOn="{StaticResource ModernScrollViewer}" />

</ResourceDictionary>
